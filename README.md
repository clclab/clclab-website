# Editing the CLC website

## How does this work? 

In brief, it is a static website generated by a piece of software called [Jekyll](https://jekyllrb.com/). 
This is both low-tech and techy: no Wordpress, databases, log-in and fancy stuff, but just simple text files (markdown).
What does Jekyll do? 
It generates a website based on what we put in the folder `jekyll`. 
So to update the website, we have to do two things: (1) change something in the folder `jekyll` (a blogpost, say). 
Then (2) run Jekyll to generate an updated version of the website. 
Step (2) is now done by hand, but we want to automate this later.

## How is the site structured?
You only have to look at the folder `jekyll`, the rest is for development (javascripting, styling, etc). 
It should be pretty straightforward: `index.html` corresponds to the home page, `people.html` the page with people etc.
However, those html files typically don't contain the actual content, but just the markup (HTML). 
You find the content, in more convenient formats, here:

- `jekyll/_data/people.yml` A text file with all details about people associated to the lab. 
These details are stored as a [YAML](https://en.wikipedia.org/wiki/YAML) file, a super simple and human readable format.
- `jekyll/_bibliography/publications.bib` A BibTeX file with all publications of the CLC lab. 
These are shown on the publications page.
- `media/` contains, well, media: images, pdfs of publications, etc.
- `posts/` contains the updates shown on the homepage. Every post gets its own markdown file, see more about that below.

You can ignore: `jekyll/_layouts`, `jekyll/assets` and `jekyll/_includes`.

## Writing posts 
Jekyll files typically start with a *header* (between three dashes) with properties of the document (title, categories, etc), again in YAML.
These three dashes are important: they signal to Jekyll that it has to process the file.
Here's the bare minimum:
```
---
# some properties, like:
title: An example document
---

Contents of the document (in markdown)

# A header

And some more **boldface** text or *italic* text.
```
Posts have specific file names, starting with a date. This is also important: Jekyll extracts the date from the filename.


## Questions or problems?

If there's a problem with the website, please create a new issue. 
Otherwise, just ask Bas via bjmcornelissen@gmail.com.



# Technicalities

## Setup
This is a static website generated by Jekyll. To change the contents you have to edit markdown (or sometimes YAML files). Jekyll builds a website based on that in the `site` directory. That's the directory served to visitors.

The user interface has some dependencies, most importantly Bootstrap, and some JS libraries such as JQuery. We use Yarn (or npm) to manage those packages, and webpack to pack them all together in one big JS file (bundle.js) which are dumped in `jekyll/assets/` and then used by Jekyll. Similarly, we use webpack to process the SASS stylesheets and dump them in `jekyll/assets/`. All styling and scripting files for the front-end can be found in the `webpack` directory. The templates are in `jekyll/layouts` as usual.

## Installation
For **deployment** install [Jekyll](https://jekyllrb.com/) and hit `jekyll serve`.

For **development** (i.e., if you want to change the styles or scripts) you need to install [node](https://nodejs.org/en/) and the package manager [yarn](https://yarnpkg.com/lang/en/docs/install/). Then run `yarn install` in the main directory to install all dependencies. After that, you can start developing! Run `yarn build` to turn process the styles and scripts (and dump them in `jekyll/assest`). Run `yarn watch` to do this whenever a file in `webpack/` gets updated.

